function we(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var fe={exports:{}};var Ee=fe.exports,ve;function Ce(){return ve||(ve=1,(function(l,r){((m,f)=>{l.exports=f()})(Ee,function m(){var f=typeof self<"u"?self:typeof window<"u"?window:f!==void 0?f:{},c,h=!f.document&&!!f.postMessage,g=f.IS_PAPA_WORKER||!1,S={},w=0,i={};function d(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var n=ce(t);n.chunkSize=parseInt(n.chunkSize),t.step||t.chunk||(n.chunkSize=null),this._handle=new he(n),(this._handle.streamer=this)._config=n}.call(this,e),this.parseChunk=function(t,n){var o=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<o){let y=this._config.newline;y||(a=this._config.quoteChar||'"',y=this._handle.guessLineEndings(t,a)),t=[...t.split(y).slice(o)].join(y)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(a=this._config.beforeFirstChunk(t))!==void 0&&(t=a),this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t,a=(this._partialLine="",this._handle.parse(o,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=a.meta.cursor,o=(this._finished||(this._partialLine=o.substring(t-this._baseIndex),this._baseIndex=t),a&&a.data&&(this._rowCount+=a.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),g)f.postMessage({results:a,workerId:i.WORKER_ID,finished:o});else if(M(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!o||!M(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),o||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){M(this._config.error)?this._config.error(t):g&&this._config.error&&f.postMessage({workerId:i.WORKER_ID,error:t,finished:!1})}}function Z(e){var t;(e=e||{}).chunkSize||(e.chunkSize=i.RemoteChunkSize),d.call(this,e),this._nextChunk=h?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),h||(t.onload=se(this._chunkLoaded,this),t.onerror=se(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!h),this._config.downloadRequestHeaders){var n,o=this._config.downloadRequestHeaders;for(n in o)t.setRequestHeader(n,o[n])}var a;this._config.chunkSize&&(a=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+a));try{t.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}h&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(n=>(n=n.getResponseHeader("Content-Range"))!==null?parseInt(n.substring(n.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(n){n=t.statusText||n,this._sendError(new Error(n))}}function G(e){(e=e||{}).chunkSize||(e.chunkSize=i.LocalChunkSize),d.call(this,e);var t,n,o=typeof FileReader<"u";this.stream=function(a){this._input=a,n=a.slice||a.webkitSlice||a.mozSlice,o?((t=new FileReader).onload=se(this._chunkLoaded,this),t.onerror=se(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var a=this._input,y=(this._config.chunkSize&&(y=Math.min(this._start+this._config.chunkSize,this._input.size),a=n.call(a,this._start,y)),t.readAsText(a,this._config.encoding));o||this._chunkLoaded({target:{result:y}})},this._chunkLoaded=function(a){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(a.target.result)},this._chunkError=function(){this._sendError(t.error)}}function R(e){var t;d.call(this,e=e||{}),this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){var n,o;if(!this._finished)return n=this._config.chunkSize,t=n?(o=t.substring(0,n),t.substring(n)):(o=t,""),this._finished=!t,this.parseChunk(o)}}function U(e){d.call(this,e=e||{});var t=[],n=!0,o=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(a){this._input=a,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=se(function(a){try{t.push(typeof a=="string"?a:a.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(y){this._streamError(y)}},this),this._streamError=se(function(a){this._streamCleanUp(),this._sendError(a)},this),this._streamEnd=se(function(){this._streamCleanUp(),o=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function he(e){var t,n,o,a,y=Math.pow(2,53),B=-y,Y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,A=0,p=0,W=!1,_=!1,v=[],u={data:[],errors:[],meta:{}};function j(z){return e.skipEmptyLines==="greedy"?z.join("").trim()==="":z.length===1&&z[0].length===0}function P(){if(u&&o&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),o=!1),e.skipEmptyLines&&(u.data=u.data.filter(function(D){return!j(D)})),H()){let D=function(N,I){M(e.transformHeader)&&(N=e.transformHeader(N,I)),v.push(N)};var x=D;if(u)if(Array.isArray(u.data[0])){for(var z=0;H()&&z<u.data.length;z++)u.data[z].forEach(D);u.data.splice(0,1)}else u.data.forEach(D)}function E(D,N){for(var I=e.header?{}:[],T=0;T<D.length;T++){var k=T,$=D[T],$=((C,F)=>(q=>(e.dynamicTypingFunction&&e.dynamicTyping[q]===void 0&&(e.dynamicTyping[q]=e.dynamicTypingFunction(q)),(e.dynamicTyping[q]||e.dynamicTyping)===!0))(C)?F==="true"||F==="TRUE"||F!=="false"&&F!=="FALSE"&&((q=>{if(Y.test(q)&&(q=parseFloat(q),B<q&&q<y))return 1})(F)?parseFloat(F):V.test(F)?new Date(F):F===""?null:F):F)(k=e.header?T>=v.length?"__parsed_extra":v[T]:k,$=e.transform?e.transform($,k):$);k==="__parsed_extra"?(I[k]=I[k]||[],I[k].push($)):I[k]=$}return e.header&&(T>v.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+T,p+N):T<v.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+T,p+N)),I}var L;u&&(e.header||e.dynamicTyping||e.transform)&&(L=1,!u.data.length||Array.isArray(u.data[0])?(u.data=u.data.map(E),L=u.data.length):u.data=E(u.data,0),e.header&&u.meta&&(u.meta.fields=v),p+=L)}function H(){return e.header&&v.length===0}function X(z,E,L,x){z={type:z,code:E,message:L},x!==void 0&&(z.row=x),u.errors.push(z)}M(e.step)&&(a=e.step,e.step=function(z){u=z,H()?P():(P(),u.data.length!==0&&(A+=z.data.length,e.preview&&A>e.preview?n.abort():(u.data=u.data[0],a(u,b))))}),this.parse=function(z,E,L){var x=e.quoteChar||'"',x=(e.newline||(e.newline=this.guessLineEndings(z,x)),o=!1,e.delimiter?M(e.delimiter)&&(e.delimiter=e.delimiter(z),u.meta.delimiter=e.delimiter):((x=((D,N,I,T,k)=>{var $,C,F,q;k=k||[",","	","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var ae=0;ae<k.length;ae++){for(var ee,le=k[ae],Q=0,te=0,K=0,J=(F=void 0,new O({comments:T,delimiter:le,newline:N,preview:10}).parse(D)),ie=0;ie<J.data.length;ie++)I&&j(J.data[ie])?K++:(ee=J.data[ie].length,te+=ee,F===void 0?F=ee:0<ee&&(Q+=Math.abs(ee-F),F=ee));0<J.data.length&&(te/=J.data.length-K),(C===void 0||Q<=C)&&(q===void 0||q<te)&&1.99<te&&(C=Q,$=le,q=te)}return{successful:!!(e.delimiter=$),bestDelimiter:$}})(z,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=x.bestDelimiter:(o=!0,e.delimiter=i.DefaultDelimiter),u.meta.delimiter=e.delimiter),ce(e));return e.preview&&e.header&&x.preview++,t=z,n=new O(x),u=n.parse(t,E,L),P(),W?{meta:{paused:!0}}:u||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,n.abort(),t=M(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){b.streamer._halted?(W=!1,b.streamer.parseChunk(t,!0)):setTimeout(b.resume,3)},this.aborted=function(){return _},this.abort=function(){_=!0,n.abort(),u.meta.aborted=!0,M(e.complete)&&e.complete(u),t=""},this.guessLineEndings=function(D,x){D=D.substring(0,1048576);var x=new RegExp(s(x)+"([^]*?)"+s(x),"gm"),L=(D=D.replace(x,"")).split("\r"),x=D.split(`
`),D=1<x.length&&x[0].length<L[0].length;if(L.length===1||D)return`
`;for(var N=0,I=0;I<L.length;I++)L[I][0]===`
`&&N++;return N>=L.length/2?`\r
`:"\r"}}function s(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(e){var t=(e=e||{}).delimiter,n=e.newline,o=e.comments,a=e.step,y=e.preview,B=e.fastMode,Y=null,V=!1,b=e.quoteChar==null?'"':e.quoteChar,A=b;if(e.escapeChar!==void 0&&(A=e.escapeChar),(typeof t!="string"||-1<i.BAD_DELIMITERS.indexOf(t))&&(t=","),o===t)throw new Error("Comment character same as delimiter");o===!0?o="#":(typeof o!="string"||-1<i.BAD_DELIMITERS.indexOf(o))&&(o=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var p=0,W=!1;this.parse=function(_,v,u){if(typeof _!="string")throw new Error("Input must be a string");var j=_.length,P=t.length,H=n.length,X=o.length,z=M(a),E=[],L=[],x=[],D=p=0;if(!_)return Q();if(B||B!==!1&&_.indexOf(b)===-1){for(var N=_.split(n),I=0;I<N.length;I++){if(x=N[I],p+=x.length,I!==N.length-1)p+=n.length;else if(u)return Q();if(!o||x.substring(0,X)!==o){if(z){if(E=[],q(x.split(t)),te(),W)return Q()}else q(x.split(t));if(y&&y<=I)return E=E.slice(0,y),Q(!0)}}return Q()}for(var T=_.indexOf(t,p),k=_.indexOf(n,p),$=new RegExp(s(A)+s(b),"g"),C=_.indexOf(b,p);;)if(_[p]===b)for(C=p,p++;;){if((C=_.indexOf(b,C+1))===-1)return u||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:E.length,index:p}),ee();if(C===j-1)return ee(_.substring(p,C).replace($,b));if(b===A&&_[C+1]===A)C++;else if(b===A||C===0||_[C-1]!==A){T!==-1&&T<C+1&&(T=_.indexOf(t,C+1));var F=ae((k=k!==-1&&k<C+1?_.indexOf(n,C+1):k)===-1?T:Math.min(T,k));if(_.substr(C+1+F,P)===t){x.push(_.substring(p,C).replace($,b)),_[p=C+1+F+P]!==b&&(C=_.indexOf(b,p)),T=_.indexOf(t,p),k=_.indexOf(n,p);break}if(F=ae(k),_.substring(C+1+F,C+1+F+H)===n){if(x.push(_.substring(p,C).replace($,b)),le(C+1+F+H),T=_.indexOf(t,p),C=_.indexOf(b,p),z&&(te(),W))return Q();if(y&&E.length>=y)return Q(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:E.length,index:p}),C++}}else if(o&&x.length===0&&_.substring(p,p+X)===o){if(k===-1)return Q();p=k+H,k=_.indexOf(n,p),T=_.indexOf(t,p)}else if(T!==-1&&(T<k||k===-1))x.push(_.substring(p,T)),p=T+P,T=_.indexOf(t,p);else{if(k===-1)break;if(x.push(_.substring(p,k)),le(k+H),z&&(te(),W))return Q();if(y&&E.length>=y)return Q(!0)}return ee();function q(K){E.push(K),D=p}function ae(K){var J=0;return J=K!==-1&&(K=_.substring(C+1,K))&&K.trim()===""?K.length:J}function ee(K){return u||(K===void 0&&(K=_.substring(p)),x.push(K),p=j,q(x),z&&te()),Q()}function le(K){p=K,q(x),x=[],k=_.indexOf(n,p)}function Q(K){if(e.header&&!v&&E.length&&!V){var J=E[0],ie=Object.create(null),pe=new Set(J);let ke=!1;for(let oe=0;oe<J.length;oe++){let ne=J[oe];if(ie[ne=M(e.transformHeader)?e.transformHeader(ne,oe):ne]){let ue,be=ie[ne];for(;ue=ne+"_"+be,be++,pe.has(ue););pe.add(ue),J[oe]=ue,ie[ne]++,ke=!0,(Y=Y===null?{}:Y)[ue]=ne}else ie[ne]=1,J[oe]=ne;pe.add(ne)}ke&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:E,errors:L,meta:{delimiter:t,linebreak:n,aborted:W,truncated:!!K,cursor:D+(v||0),renamedHeaders:Y}}}function te(){a(Q()),E=[],L=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return p}}function re(e){var t=e.data,n=S[t.workerId],o=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){o=!0,ye(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:xe,resume:xe};if(M(n.userStep)){for(var y=0;y<t.results.data.length&&(n.userStep({data:t.results.data[y],errors:t.results.errors,meta:t.results.meta},a),!o);y++);delete t.results}else M(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!o&&ye(t.workerId,t.results)}function ye(e,t){var n=S[e];M(n.userComplete)&&n.userComplete(t),n.terminate(),delete S[e]}function xe(){throw new Error("Not implemented.")}function ce(e){if(typeof e!="object"||e===null)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=ce(e[t]);return n}function se(e,t){return function(){e.apply(t,arguments)}}function M(e){return typeof e=="function"}return i.parse=function(e,t){var n=(t=t||{}).dynamicTyping||!1;if(M(n)&&(t.dynamicTypingFunction=n,n={}),t.dynamicTyping=n,t.transform=!!M(t.transform)&&t.transform,!t.worker||!i.WORKERS_SUPPORTED)return n=null,i.NODE_STREAM_INPUT,typeof e=="string"?(e=(o=>o.charCodeAt(0)!==65279?o:o.slice(1))(e),n=new(t.download?Z:R)(t)):e.readable===!0&&M(e.read)&&M(e.on)?n=new U(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new G(t)),n.stream(e);(n=(()=>{var o;return!!i.WORKERS_SUPPORTED&&(o=(()=>{var a=f.URL||f.webkitURL||null,y=m.toString();return i.BLOB_URL||(i.BLOB_URL=a.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",y,")();"],{type:"text/javascript"})))})(),(o=new f.Worker(o)).onmessage=re,o.id=w++,S[o.id]=o)})()).userStep=t.step,n.userChunk=t.chunk,n.userComplete=t.complete,n.userError=t.error,t.step=M(t.step),t.chunk=M(t.chunk),t.complete=M(t.complete),t.error=M(t.error),delete t.worker,n.postMessage({input:e,config:t,workerId:n.id})},i.unparse=function(e,t){var n=!1,o=!0,a=",",y=`\r
`,B='"',Y=B+B,V=!1,b=null,A=!1,p=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||i.BAD_DELIMITERS.filter(function(v){return t.delimiter.indexOf(v)!==-1}).length||(a=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(n=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(V=t.skipEmptyLines),typeof t.newline=="string"&&(y=t.newline),typeof t.quoteChar=="string"&&(B=t.quoteChar),typeof t.header=="boolean"&&(o=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");b=t.columns}t.escapeChar!==void 0&&(Y=t.escapeChar+B),t.escapeFormulae instanceof RegExp?A=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(A=/^[=+\-@\t\r].*$/)}})(),new RegExp(s(B),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return W(null,e,V);if(typeof e[0]=="object")return W(b||Object.keys(e[0]),e,V)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||b),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),W(e.fields||[],e.data||[],V);throw new Error("Unable to serialize unrecognized input");function W(v,u,j){var P="",H=(typeof v=="string"&&(v=JSON.parse(v)),typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(v)&&0<v.length),X=!Array.isArray(u[0]);if(H&&o){for(var z=0;z<v.length;z++)0<z&&(P+=a),P+=_(v[z],z);0<u.length&&(P+=y)}for(var E=0;E<u.length;E++){var L=(H?v:u[E]).length,x=!1,D=H?Object.keys(u[E]).length===0:u[E].length===0;if(j&&!H&&(x=j==="greedy"?u[E].join("").trim()==="":u[E].length===1&&u[E][0].length===0),j==="greedy"&&H){for(var N=[],I=0;I<L;I++){var T=X?v[I]:I;N.push(u[E][T])}x=N.join("").trim()===""}if(!x){for(var k=0;k<L;k++){0<k&&!D&&(P+=a);var $=H&&X?v[k]:k;P+=_(u[E][$],k)}E<u.length-1&&(!j||0<L&&!D)&&(P+=y)}}return P}function _(v,u){var j,P;return v==null?"":v.constructor===Date?JSON.stringify(v).slice(1,25):(P=!1,A&&typeof v=="string"&&A.test(v)&&(v="'"+v,P=!0),j=v.toString().replace(p,Y),(P=P||n===!0||typeof n=="function"&&n(v,u)||Array.isArray(n)&&n[u]||((H,X)=>{for(var z=0;z<X.length;z++)if(-1<H.indexOf(X[z]))return!0;return!1})(j,i.BAD_DELIMITERS)||-1<j.indexOf(a)||j.charAt(0)===" "||j.charAt(j.length-1)===" ")?B+j+B:j)}},i.RECORD_SEP="",i.UNIT_SEP="",i.BYTE_ORDER_MARK="\uFEFF",i.BAD_DELIMITERS=["\r",`
`,'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!h&&!!f.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=O,i.ParserHandle=he,i.NetworkStreamer=Z,i.FileStreamer=G,i.StringStreamer=R,i.ReadableStreamStreamer=U,f.jQuery&&((c=f.jQuery).fn.parse=function(e){var t=e.config||{},n=[];return this.each(function(y){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&f.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)n.push({file:this.files[B],inputElem:this,instanceConfig:c.extend({},t)})}),o(),this;function o(){if(n.length===0)M(e.complete)&&e.complete();else{var y,B,Y,V,b=n[0];if(M(e.before)){var A=e.before(b.file,b.inputElem);if(typeof A=="object"){if(A.action==="abort")return y="AbortError",B=b.file,Y=b.inputElem,V=A.reason,void(M(e.error)&&e.error({name:y},B,Y,V));if(A.action==="skip")return void a();typeof A.config=="object"&&(b.instanceConfig=c.extend(b.instanceConfig,A.config))}else if(A==="skip")return void a()}var p=b.instanceConfig.complete;b.instanceConfig.complete=function(W){M(p)&&p(W,b.file,b.inputElem),a()},i.parse(b.file,b.instanceConfig)}}function a(){n.splice(0,1),o()}}),g&&(f.onmessage=function(e){e=e.data,i.WORKER_ID===void 0&&e&&(i.WORKER_ID=e.workerId),typeof e.input=="string"?f.postMessage({workerId:i.WORKER_ID,results:i.parse(e.input,e.config),finished:!0}):(f.File&&e.input instanceof File||e.input instanceof Object)&&(e=i.parse(e.input,e.config))&&f.postMessage({workerId:i.WORKER_ID,results:e,finished:!0})}),(Z.prototype=Object.create(d.prototype)).constructor=Z,(G.prototype=Object.create(d.prototype)).constructor=G,(R.prototype=Object.create(R.prototype)).constructor=R,(U.prototype=Object.create(d.prototype)).constructor=U,i})})(fe)),fe.exports}var Re=Ce(),Oe=we(Re);function Te(l){const r=l.lastIndexOf(".");return r===-1||r===0||r===l.length-1?null:l.substring(r).toLowerCase()}function de(l){const r=l.replace(/\\/g,"/"),m=r.lastIndexOf("/");return m<=0?"/":r.substring(0,m)}function me(l){const m=l.replace(/\\/g,"/").split("/").filter(Boolean);return m[m.length-1]||"/"}function _e(l){return l.replace(/\\/g,"/").split("/").filter(Boolean).length}function ze(l){return l.replace(/\\/g,"/")}self.onmessage=async l=>{const{file:r,columnMapping:m}=l.data,f=[];let c=0;const h=Math.ceil(r.size/200);self.postMessage({type:"progress",percent:0,rowsProcessed:0,stage:"Parsing CSV..."}),Oe.parse(r,{header:!0,skipEmptyLines:!0,chunk:g=>{for(const w of g.data){const i=Me(w,m,c);i&&f.push(i),c++}const S=Math.min(90,c/h*90);self.postMessage({type:"progress",percent:S,rowsProcessed:c,stage:`Parsing CSV... (${c.toLocaleString()} rows)`})},complete:()=>{self.postMessage({type:"progress",percent:92,rowsProcessed:c,stage:"Building folder tree..."});const g=De(f);self.postMessage({type:"progress",percent:96,rowsProcessed:c,stage:"Calculating statistics..."});const S=Ie(f,g);self.postMessage({type:"complete",data:{entries:f,tree:g,stats:S}})},error:g=>{self.postMessage({type:"error",error:g.message})}})};function Me(l,r,m){const f=l[r.path];if(!f)return null;const c=ze(f),h=r.name?l[r.name]:me(c),g=l[r.type]?.toLowerCase()||"file",S=g==="folder"||g==="directory"?"folder":"file",w={};let i=!1;const d=Z=>{const G=r[Z];G&&l[G]&&(w[Z]=l[G],i=!0)};return d("extracted_date"),d("date_precision"),d("date_format_hint"),d("date_confidence"),d("taxa_verbatim"),d("taxa_interpreted"),d("taxa_rank"),d("taxa_kingdom"),d("taxa_phylum"),d("taxa_class"),d("taxa_order"),d("taxa_family"),d("taxa_genus"),d("taxa_species"),d("taxa_common_name"),d("taxa_gbif_key"),d("taxa_source"),d("species"),d("species_source"),d("equipment"),d("location"),d("zone"),d("project"),d("data_type"),d("climate_variable"),d("climate_extent"),d("camera_id"),d("sequence_number"),d("deforestation_period"),r.is_system_file&&l[r.is_system_file]&&(w.is_system_file=l[r.is_system_file]?.toLowerCase()==="true",i=!0),{id:`${m}-${c.replace(/[^a-zA-Z0-9]/g,"-").substring(0,50)}`,path:c,name:h||me(c),type:S,size:parseInt(l[r.size])||0,extension:r.extension?l[r.extension]||null:S==="file"?Te(h||c):null,modified:r.modified&&l[r.modified]||null,parent:r.parent?ze(l[r.parent]||de(c)):de(c),depth:r.depth&&parseInt(l[r.depth])||_e(c),hash:r.hash?l[r.hash]:void 0,metadata:i?w:void 0}}function De(l){const r={path:"/",name:"Root",type:"folder",size:0,fileCount:0,folderCount:0,directChildren:0,children:new Map,depth:0,extensionStats:new Map},m=new Map;m.set("/",r);const f=l.filter(h=>h.type==="folder");for(const h of f){const g=h.path,S={path:g,name:h.name,type:"folder",size:0,fileCount:0,folderCount:0,directChildren:0,children:new Map,depth:h.depth,extensionStats:new Map};m.set(g,S)}for(const[h,g]of m){if(h==="/")continue;const S=de(h);let w=m.get(S);w||(w=ge(m,S,r)),w.children.set(g.name,g),w.directChildren++}const c=l.filter(h=>h.type==="file");for(const h of c){const g=h.parent;let S=m.get(g);S||(S=ge(m,g,r));const w={path:h.path,name:h.name,type:"file",size:h.size,extension:h.extension,modified:h.modified,depth:h.depth,metadata:h.metadata};S.children.set(w.name,w),S.directChildren++}return Se(r),r}function ge(l,r,m){if(r==="/"||r==="")return m;const f=l.get(r);if(f)return f;const c={path:r,name:me(r),type:"folder",size:0,fileCount:0,folderCount:0,directChildren:0,children:new Map,depth:_e(r),extensionStats:new Map};l.set(r,c);const h=de(r),g=ge(l,h,m);return g.children.set(c.name,c),g.directChildren++,c}function Se(l){let r=0,m=0,f=0;const c=new Map;for(const[,h]of l.children)if(h.type==="file"){r+=h.size,m++;const g=h.extension||"no-extension",S=c.get(g)||{count:0,size:0};S.count++,S.size+=h.size,c.set(g,S)}else{const g=Se(h);r+=g.size,m+=g.fileCount,f+=g.folderCount+1;for(const[S,w]of g.extensionStats){const i=c.get(S)||{count:0,size:0};i.count+=w.count,i.size+=w.size,c.set(S,i)}}return l.size=r,l.fileCount=m,l.folderCount=f,l.extensionStats=c,{size:r,fileCount:m,folderCount:f,extensionStats:c}}function Ie(l,r){const m=l.filter(s=>s.type==="file"),f=l.filter(s=>s.type==="folder"),c={},h={};for(const s of m){const O=s.extension||"no-extension";c[O]=(c[O]||0)+1,h[O]=(h[O]||0)+s.size}const g=[{label:"0-1KB",min:0,max:1024,count:0,totalSize:0},{label:"1KB-100KB",min:1024,max:102400,count:0,totalSize:0},{label:"100KB-1MB",min:102400,max:1048576,count:0,totalSize:0},{label:"1MB-10MB",min:1048576,max:10485760,count:0,totalSize:0},{label:"10MB-100MB",min:10485760,max:104857600,count:0,totalSize:0},{label:"100MB-1GB",min:104857600,max:1073741824,count:0,totalSize:0},{label:"1GB+",min:1073741824,max:1/0,count:0,totalSize:0}];for(const s of m)for(const O of g)if(s.size>=O.min&&s.size<O.max){O.count++,O.totalSize+=s.size;break}const S=[...m].sort((s,O)=>O.size-s.size).slice(0,20),w=[];function i(s){w.push({path:s.path,name:s.name,size:s.size,fileCount:s.fileCount});for(const[,O]of s.children)O.type==="folder"&&i(O)}i(r);const d=w.filter(s=>s.path!=="/").sort((s,O)=>O.size-s.size).slice(0,20),Z=m.some(s=>s.modified),G={};if(Z){for(const s of m)if(s.modified)try{const O=new Date(s.modified),re=`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`;G[re]=(G[re]||0)+1}catch{}}const R={taxonomy:{kingdom:{},phylum:{},class:{},order:{},family:{},genus:{},species:{}},species:{},projects:{},locations:{},zones:{},equipment:{},dataTypes:{},hasMetadata:!1,hasTaxonomy:!1},U=(s,O,re)=>{O&&(s[O]||(s[O]={count:0,size:0}),s[O].count++,s[O].size+=re)};for(const s of l)s.metadata&&(R.hasMetadata=!0,s.metadata.taxa_kingdom&&(R.hasTaxonomy=!0,U(R.taxonomy.kingdom,s.metadata.taxa_kingdom,s.size)),s.metadata.taxa_phylum&&(R.hasTaxonomy=!0,U(R.taxonomy.phylum,s.metadata.taxa_phylum,s.size)),s.metadata.taxa_class&&(R.hasTaxonomy=!0,U(R.taxonomy.class,s.metadata.taxa_class,s.size)),s.metadata.taxa_order&&(R.hasTaxonomy=!0,U(R.taxonomy.order,s.metadata.taxa_order,s.size)),s.metadata.taxa_family&&(R.hasTaxonomy=!0,U(R.taxonomy.family,s.metadata.taxa_family,s.size)),s.metadata.taxa_genus&&(R.hasTaxonomy=!0,U(R.taxonomy.genus,s.metadata.taxa_genus,s.size)),s.metadata.taxa_interpreted&&(R.hasTaxonomy=!0,U(R.taxonomy.species,s.metadata.taxa_interpreted,s.size)),U(R.species,s.metadata.species,s.size),U(R.projects,s.metadata.project,s.size),U(R.locations,s.metadata.location,s.size),U(R.zones,s.metadata.zone,s.size),U(R.equipment,s.metadata.equipment,s.size),U(R.dataTypes,s.metadata.data_type,s.size));const he=Fe(m);return{totalFiles:m.length,totalFolders:f.length,totalSize:r.size,extensionCounts:c,sizeByExtension:h,sizeDistribution:g,largestFiles:S,largestFolders:d,filesByMonth:Z?G:void 0,hasDateData:Z,metadataStats:R.hasMetadata?R:void 0,deduplication:he}}function Fe(l){const r=new Map;for(const w of l){if(!w.hash)continue;const i=r.get(w.hash)||[];i.push(w),r.set(w.hash,i)}if(r.size===0)return;let m=0;const f=[];let c=0;for(const[w,i]of r){const d=i[0].size;if(m+=d,i.length>1){const Z=d*(i.length-1);c+=i.length-1,f.push({hash:w,fileSize:d,copyCount:i.length,wastedBytes:Z,sampleName:i[0].name,samplePath:i[0].path,files:i.map(G=>({name:G.name,path:G.path}))})}}f.sort((w,i)=>i.wastedBytes-w.wastedBytes);const h=l.reduce((w,i)=>w+i.size,0),g=h-m,S=h>0?g/h*100:0;return{uniqueSize:m,duplicateSize:g,duplicatePercent:S,duplicateGroups:f.length,duplicateFileCount:c,topDuplicates:f.slice(0,20)}}
